<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>PostIt</title>
    <meta name="description" content="Welcome to postit!" />

    <link rel="icon" href="/favicon.png" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="styles/index.css" />
  </head>

  <body>
    <div class="head">
      <div>
        <img id="smaller-note-image" src="images/note.png" alt="note" />
      </div>
      <form>
        <input type="text" class="search" />
        <input type="submit" value="Search" class="search" id="search" />
      </form>
      <div class="dropdown">
        <button class="dropdownButton" onclick="showInfo()">
          <img
            id="user-image"
            src="images/me.png"
            alt="user"
            height="40"
            display="block"
          />
        </button>
      <div class="dropdown-content" id="dropdownInfo">
        <b>John Doe</b>
        <b>john.doe@example.com</b>
      </div>
      </div>
    </div>

    <div class="flex-container"></div>
  </body>
  <script>
    function showInfo(){
      document.getElementById("dropdownInfo").classList.toggle("show")
    }
    $(function () {
      $.get(
        "https://api.jsonbin.io/b/617589c89548541c29c7e082",
        function (json_obj) {
          for (postData of json_obj.posts) {
            let postHeading = $('<div class="post_heading">');
            postHeading.append($('<iframe class="user"></iframe>'));
            postHeading.append($('<p id="date">').text(postData.time));

            let post = $('<div id="post">');
            if (postData.image)
              post.append(
                $(
                  `<img id="image" src="${postData.image}" alt="image" width="100%" />`
                )
              );
            post.append($("<p>").text(postData.content));

            let div = $('<div class="flex-item">');
            div.append(postHeading);
            div.append(post);
            div.append($('<button id="like"></button>'));

            $(".flex-container").append(div);
          }
        }
      );

    });
  </script>
</html>
